"use strict";(self.webpackChunk_morgan_stanley_ComposeUI_gh_pages=self.webpackChunk_morgan_stanley_ComposeUI_gh_pages||[]).push([[629],{5608:function(e,t,n){n.r(t),n.d(t,{Head:function(){return m},default:function(){return d}});var a=n(8453),l=n(6540);function s(e){const t=Object.assign({h2:"h2",a:"a",span:"span",p:"p",h3:"h3"},(0,a.RP)(),e.components);return l.createElement(l.Fragment,null,"\n",l.createElement(t.h2,{id:"context",style:{position:"relative"}},l.createElement(t.a,{href:"#context","aria-label":"context permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Context"),"\n",l.createElement(t.p,null,"The Message Router is one of ComposeUIâ€™s core components. It serves as a generic communication layer that modules can\nbuild their APIs upon, and as such, needs to be simple, robust and high performing. In this ADR we are listing the\nrequirements for the MVP of the Message Router."),"\n",l.createElement(t.h2,{id:"decision",style:{position:"relative"}},l.createElement(t.a,{href:"#decision","aria-label":"decision permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Decision"),"\n",l.createElement(t.h3,{id:"simple-topic-based-pub-sub",style:{position:"relative"}},l.createElement(t.a,{href:"#simple-topic-based-pub-sub","aria-label":"simple topic based pub sub permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Simple, topic-based pub-sub"),"\n",l.createElement(t.p,null,"The Message Router should provide a topic-based publisher-subscriber platform with the publish API being as simple as"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">publish(topic, payload)</code></pre></div>'}}),"\n",l.createElement(t.p,null,"where ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">topic</code>'}})," is a string and ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">payload</code>'}})," is a property bag (or key-value collection)."),"\n",l.createElement(t.p,null,"Language bindings may support serialization/deserialization of strongly typed data from the payload, however the core\nAPI will only define the format for the most common, primitive types only. Keys and values should be considered to be\nstrings for the communication layer."),"\n",l.createElement(t.p,null,"Payload size should be limited to avoid using the Message Router as a content delivery mechanism.\nFor the sake of simplicity, message headers are not supported, mostly to discourage the creation of high level,\ncustom protocols that should be implemented by more suitable technologies."),"\n",l.createElement(t.h3,{id:"service-calls",style:{position:"relative"}},l.createElement(t.a,{href:"#service-calls","aria-label":"service calls permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Service calls"),"\n",l.createElement(t.p,null,"The router should also provide APIs allowing modules to register services that can be invoked by other modules.\nService calls should be synchronous (ie. wait for a response). It is the responsibility of language bindings\nto correlate messages into request-response pairs and provide a simple API for service calls:"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">response = invoke(service, request)</code></pre></div>'}}),"\n",l.createElement(t.p,null,"where ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">service</code>'}})," is a string, and ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">request</code>'}})," and ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">response</code>'}})," are property bags."),"\n",l.createElement(t.p,null,"The router should handle recursive service calls (A invokes B who invokes A again before returning a\nresponse). Such communication patterns should not degrade performance or cause deadlocks."),"\n",l.createElement(t.h3,{id:"plugable-message-pipelines",style:{position:"relative"}},l.createElement(t.a,{href:"#plugable-message-pipelines","aria-label":"plugable message pipelines permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Plugable message pipelines"),"\n",l.createElement(t.p,null,"There should be an easy-to-configure, plugable pipeline for mapping topics to external services such as Kafka or\nAzure Service Bus. These plugins will be .NET assemblies loaded into the process of the router, with the ability to\ninject and intercept messages using a simple API."),"\n",l.createElement(t.h3,{id:"high-throughput",style:{position:"relative"}},l.createElement(t.a,{href:"#high-throughput","aria-label":"high throughput permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"High throughput"),"\n",l.createElement(t.p,null,"Since ComposeUI apps are GUI applications, and application components communicate over the Message Router, it should\nbe designed from the ground up for high performance, with cross-process (local) communication in the center."),"\n",l.createElement(t.h3,{id:"delivery-guarantees",style:{position:"relative"}},l.createElement(t.a,{href:"#delivery-guarantees","aria-label":"delivery guarantees permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Delivery guarantees"),"\n",l.createElement(t.p,null,"For cross-process communication, the Message Router should guarantee Exactly Once delivery. However, messages\nshould not be persisted between sessions, that is, pending messages should be deleted when the application shuts down.\nMessages should also be delivered in strict order at least within a topic or service address, eg. subscribers of a\ntopic should receive messages in the order in which the publisher sent them;"),"\n",l.createElement(t.p,null,"For cross-machine communication, no such guarantees are provided."),"\n",l.createElement(t.h2,{id:"consequences",style:{position:"relative"}},l.createElement(t.a,{href:"#consequences","aria-label":"consequences permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Consequences"),"\n",l.createElement(t.p,null,"For the MVP, we must define supported communication protocols early on, as language bindings must also support them.\nWe should use well-known protocols and formats to minimize the cost of implementing language bindings - for this\nreason, we will likely drop SignalR and similar non-standard mechanism from the list of candidates."))}var r=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.RP)(),e.components);return t?l.createElement(t,e,l.createElement(s,e)):s(e)},o=n(5927),i=n(2870),c=n(9878);const h=e=>{var t,n;let{children:a,data:s,pageContext:r,location:i}=e;const h=s.allMdx.nodes.filter(e=>!e.internal.contentFilePath.includes("index")),d=s.mdx.tableOfContents.items,m=r.frontmatter.title,u=r.frontmatter.id,p=r.frontmatter.status,g=r.frontmatter.scope,v=r.frontmatter.deciders,f=new Intl.DateTimeFormat("en-US").format(new Date(r.frontmatter.date)),b=null===(t=s.site)||void 0===t||null===(n=t.siteMetadata)||void 0===n?void 0:n.title;return l.createElement(o.A,{data:s,location:i,menu:r.menu},l.createElement("article",{className:"page-main content"},l.createElement("h3",null,b)),l.createElement("article",{className:"page-main content documentation-main"},l.createElement("nav",{className:"nav documentation-nav"},l.createElement("h4",null,"Architecture"),l.createElement(c.w,{nodes:h,toc:d,location:i})),l.createElement("div",{className:"documentation-content"},l.createElement("header",null,l.createElement("h2",null,m)),l.createElement("dl",null,l.createElement("dt",null,"ADR ID"),l.createElement("dd",null,u),l.createElement("dt",null,"Status"),l.createElement("dd",null,p),l.createElement("dt",null,"Scope"),l.createElement("dd",null,g),l.createElement("dt",null,"Deciders"),l.createElement("dd",null,v),l.createElement("dt",null,"Date"),l.createElement("dd",null,f)),a)))};function d(e){return l.createElement(h,e,l.createElement(r,e))}const m=e=>{let{data:t,pageContext:n}=e;const a=n.frontmatter.title+" | "+t.site.siteMetadata.title;return l.createElement(i.A,{title:a},l.createElement("meta",{name:"description",content:n.description}))}},9878:function(e,t,n){n.d(t,{w:function(){return s}});var a=n(6540),l=n(4794);const s=e=>{let{nodes:t,toc:n,location:s}=e;return a.createElement("ul",null,t.map((e,t)=>{const r=s.pathname.includes(e.fields.slug),o=e.frontmatter.title;return a.createElement("li",{key:t,className:r?"current":""},a.createElement(l.Link,{to:e.fields.slug},o),r&&a.createElement("nav",{className:"nav documentation-content-nav"},a.createElement("ul",null,n&&n.map((e,t)=>a.createElement("li",{key:"link-"+t},a.createElement(l.Link,{to:e.url},e.title))))))}))}}}]);
//# sourceMappingURL=component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-009-message-router-mdx-683dc967f57345ff52d8.js.map