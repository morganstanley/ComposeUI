"use strict";(self.webpackChunk_morgan_stanley_ComposeUI_gh_pages=self.webpackChunk_morgan_stanley_ComposeUI_gh_pages||[]).push([[474],{2259:function(e,t,n){n.r(t),n.d(t,{Head:function(){return h},default:function(){return m}});var a=n(8453),l=n(6540);function o(e){const t=Object.assign({h2:"h2",a:"a",span:"span",p:"p",h3:"h3",ol:"ol",li:"li",ul:"ul"},(0,a.RP)(),e.components);return l.createElement(l.Fragment,null,"\n",l.createElement(t.h2,{id:"context",style:{position:"relative"}},l.createElement(t.a,{href:"#context","aria-label":"context permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Context"),"\n",l.createElement(t.p,null,"ComposeUI is modular, and although the core and loader are responsible for loading a module, the only\nway for a module to interact with ComposeUI modules is via the Message Router. Therefore the communication\nneeds to be secure so that the other modules can be sure that the messages are coming from a trusted source."),"\n",l.createElement(t.p,null,"The aim of this ADR is to establish what type of security measures are going to be implemented."),"\n",l.createElement(t.p,null,"When a module connects to the Message Router, it is likely to be with a WebSocket connection.\nAs a first line of defense, we could use Secure WebSocket (wss://) to encrypt the messages on the channel,\nhowever, since the communication is going to happen within the same machine (localhost), this might not be\nnecessary."),"\n",l.createElement(t.h3,{id:"authenticatingidentifying-a-module",style:{position:"relative"}},l.createElement(t.a,{href:"#authenticatingidentifying-a-module","aria-label":"authenticatingidentifying a module permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Authenticating/Identifying a module"),"\n",l.createElement(t.p,null,"These are the scenarios that we account for:"),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"A .NET assembly is loaded by Compose","\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"We can verify it by using Authenticode"),"\n"),"\n"),"\n",l.createElement(t.li,null,"A Web application is loaded into a ComposeUI embedded browser","\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"We will use WebView2 and verify the URL that is loaded"),"\n",l.createElement(t.li,null,"We can intercept any navigation event and check the new URL against an allowed URL/domain list"),"\n"),"\n"),"\n",l.createElement(t.li,null,"A Web application loaded into a desktop browser (i.e. Chrome)","\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"We can use OAuth to authenticate the web app"),"\n"),"\n"),"\n"),"\n",l.createElement(t.p,null,"We distribute a generated token offline to each client app developer team.\nThey bundle the token into the application. The app sends this token to ComposeUI when connecting.\nThis token identifies the app and it can also be used to associate entitlements with the app."),"\n",l.createElement(t.p,null,"Once we verify that it is a valid token, we allow the app to connect to the Message Router."),"\n",l.createElement(t.h3,{id:"opt-out-of-authentication",style:{position:"relative"}},l.createElement(t.a,{href:"#opt-out-of-authentication","aria-label":"opt out of authentication permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Opt-out of Authentication"),"\n",l.createElement(t.p,null,"The app developer might decide that they want to allow modules without authentication, but the default\nwill be to allow authenticated clients only.\nIf authentication fails, we mark it as “anonymous” and give it an ID, but with the strict option,\nwe reject the connection in this case."),"\n",l.createElement(t.h2,{id:"decision",style:{position:"relative"}},l.createElement(t.a,{href:"#decision","aria-label":"decision permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Decision"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"The default is that we allow authenticated clients only"),"\n",l.createElement(t.li,null,"Provide an option for the application to opt-out of authentication"),"\n",l.createElement(t.li,null,"We mark modules/apps that are not identified with an “anonymous” flag"),"\n"),"\n",l.createElement(t.h2,{id:"consequences",style:{position:"relative"}},l.createElement(t.a,{href:"#consequences","aria-label":"consequences permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Consequences"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"Modules need a token to connect to the central Message Router"),"\n",l.createElement(t.li,null,"The app can choose (by config) to allow unauthenticated modules to communicate"),"\n",l.createElement(t.li,null,"A module can choose to not receive messages from unauthenticated modules"),"\n",l.createElement(t.li,null,"The central Message Router will filter out messages from anonymous modules if needed"),"\n"))}var i=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.RP)(),e.components);return t?l.createElement(t,e,l.createElement(o,e)):o(e)},c=n(392),r=n(2870),s=n(9878);const u=e=>{var t,n;let{children:a,data:o,pageContext:i,location:r}=e;const u=o.allMdx.nodes.filter((e=>!e.internal.contentFilePath.includes("index"))),m=o.mdx.tableOfContents.items,h=i.frontmatter.title,d=i.frontmatter.id,p=i.frontmatter.status,f=i.frontmatter.scope,E=i.frontmatter.deciders,g=new Intl.DateTimeFormat("en-US").format(new Date(i.frontmatter.date)),v=null===(t=o.site)||void 0===t||null===(n=t.siteMetadata)||void 0===n?void 0:n.title;return l.createElement(c.A,{data:o,location:r,menu:i.menu},l.createElement("article",{className:"page-main content"},l.createElement("h3",null,v)),l.createElement("article",{className:"page-main content documentation-main"},l.createElement("nav",{className:"nav documentation-nav"},l.createElement("h4",null,"Architecture"),l.createElement(s.w,{nodes:u,toc:m,location:r})),l.createElement("div",{className:"documentation-content"},l.createElement("header",null,l.createElement("h2",null,h)),l.createElement("dl",null,l.createElement("dt",null,"ADR ID"),l.createElement("dd",null,d),l.createElement("dt",null,"Status"),l.createElement("dd",null,p),l.createElement("dt",null,"Scope"),l.createElement("dd",null,f),l.createElement("dt",null,"Deciders"),l.createElement("dd",null,E),l.createElement("dt",null,"Date"),l.createElement("dd",null,g)),a)))};function m(e){return l.createElement(u,e,l.createElement(i,e))}const h=e=>{let{data:t,pageContext:n}=e;const a=`${n.frontmatter.title} | ${t.site.siteMetadata.title}`;return l.createElement(r.A,{title:a},l.createElement("meta",{name:"description",content:n.description}))}},9878:function(e,t,n){n.d(t,{w:function(){return o}});var a=n(6540),l=n(4794);const o=e=>{let{nodes:t,toc:n,location:o}=e;return a.createElement("ul",null,t.map(((e,t)=>{const i=o.pathname.includes(e.fields.slug),c=e.frontmatter.title;return a.createElement("li",{key:t,className:i?"current":""},a.createElement(l.Link,{to:e.fields.slug},c),i&&a.createElement("nav",{className:"nav documentation-content-nav"},a.createElement("ul",null,n&&n.map(((e,t)=>a.createElement("li",{key:`link-${t}`},a.createElement(l.Link,{to:e.url},e.title)))))))})))}}}]);
//# sourceMappingURL=component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-008-module-security-mdx-cf254e5f7a2438b80ffb.js.map