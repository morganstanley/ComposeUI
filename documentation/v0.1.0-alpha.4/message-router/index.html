<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.15.0"/><meta name="description" data-gatsby-head="true"/><style data-href="/ComposeUI/styles.5521a221af2150bc281a.css" data-identity="gatsby-global-css">@font-face{font-family:ms_gloriola_ii_std_reg;font-style:normal;font-weight:400;src:url(https://www.morganstanley.com/etc.clientlibs/msdotcomr4/clientlibs/clientlib-site/webfonts/resources/ms_gloriola_ii_std_reg-webfont.woff)}@font-face{font-family:ms_gloriola_ii_std_light;font-style:normal;font-weight:300;src:url(https://www.morganstanley.com/etc.clientlibs/msdotcomr4/clientlibs/clientlib-site/webfonts/resources/ms_gloriola_ii_std_light-webfont.woff)}@font-face{font-family:ms_gloriola_ii_std_semibold;font-style:normal;font-weight:600;src:url(https://www.morganstanley.com/etc.clientlibs/msdotcomr4/clientlibs/clientlib-site/webfonts/resources/ms_gloriola_ii_std_semibold.ttf)}:root{--white-foundational-color:#fff;--black-foundational-color:#000;--primary-foundational-color:#187aba;--secondary-foundational-color:#002b51;--primary-accent-color:#0a6f7a;--secondary-accent-color:#63c;--tertiary-accent-color:#3cb661;--error-extended-accent-color:#d7222d;--berry-extended-accent-color:#d3086f;--peach-extended-accent-color:#ff7e81;--tangerine-extended-accent-color:#fa823c;--aqua-extended-accent-color:#4ccacd;--purple-extended-accent-color:#e0d6f5;--main-text-color:#4c4c4c;--heading-text-color:#333;--secondary-bg-color:#f2f2f2;--border-color:#ddd;--heading-font:"ms_gloriola_ii_std_semibold",sans-serif;--light-font:"ms_gloriola_ii_std_light",sans-serif;--regular-font:"ms_gloriola_ii_std_reg",sans-serif;--alternate-font:Karla,Arial,sans-serif;--code-font:"Courier New",Courier,monospace;--spacing-section:5rem}::selection{background-color:var(--aqua-extended-accent-color)}html{font-size:16px;line-height:2em}body{background-color:var(--white-foundational-color);color:var(--main-text-color);margin:0;padding:0}a,body{font-family:var(--alternate-font)}a{color:var(--primary-foundational-color);text-decoration:none}a:hover{text-decoration:underline}a:visted{color:var(--secondary-foundational-color)}h1,h2,h3,h4,h5{color:var(--heading-text-color);font-family:var(--heading-font);line-height:1em;margin:0}h1{font-size:54px}h2{font-size:40px}h3{font-size:30px;letter-spacing:-1.0875px}h4{font-size:20px}h5{font-size:16px}hr{border:.5px solid var(--border-color);margin:auto;width:80%}ul li{list-style-type:disc;padding:0}dd,dt{display:inline-block;width:50%}dt{font-weight:700;width:200px}dt:after{content:":"}dd{margin:0}table{border-collapse:collapse;margin:2rem 0;table-layout:fixed;width:100%}table thead{background-color:var(--secondary-bg-color);border-bottom:1px solid var(--border-color)}table thead th{text-align:left}tbody td:first-child{font-weight:700}tr{border-bottom:1px solid var(--border-color)}td,th{padding:1rem}.button,.button.outlined:hover,button,button.outlined:hover{background-color:var(--primary-foundational-color);border:1px solid var(--primary-foundational-color);color:var(--white-foundational-color);font-family:var(--alternate-font);font-size:.85em;font-weight:700;padding:.75em 1em;text-decoration:none;text-transform:uppercase}.button.outlined,.button:hover,button.outlined,button:hover{background-color:var(--white-foundational-color);border:1px solid var(--primary-foundational-color);color:var(--primary-foundational-color)}.button:disabled,button:disabled{opacity:.33}.button.align-right{text-align:right}:root{--background:#002b51;--comment:#ccd5dc;--foreground:#fff;--selection:#335574;--blue-20:#d1e4f1;--blue-40:#a3cae3;--blue-80:#4695c8;--blue:#187aba;--navy-20:#ccd5dc;--navy-40:#99aab9;--navy-80:#335574;--navy:#002b51;--jade-40:#b2e2c0;--jade-80:#65c681;--jade:#3eb661;--purple-20:#e0d6f5;--purple-40:#c2adeb;--purple-80:#855cd6;--purple:#63c;--ocean-20:#cee2e4;--ocean-40:#9dc5ca;--ocean-80:#3b8c95;--ocean:#0a6f7a;--berry-20:#f6cee2;--berry-40:#ed9cc5;--berry-80:#dc398c;--berry:#d3086f;--peach-20:#ffe5e6;--peach-40:#ffcbcd;--peach-80:#ff989a;--peach:#ff7e81;--tangerine-20:#fee6d8;--tangerine-40:#fdcdb1;--tangerine-80:#fa8236;--tangerine:#fa823c;--aqua-40:#b7ebea;--aqua-60:#94dfe1;--aqua-80:#70d5d7;--aqua:#4ccacd}pre::-webkit-scrollbar{width:14px}pre::-webkit-scrollbar-track{background-color:var(--comment);border-radius:0}pre::-webkit-scrollbar-thumb{background-color:var(--purple-40);border-radius:0}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background-color:var(--selection);text-shadow:none}.gatsby-highlight pre[class*=language-].line-numbers{padding-left:2.8em}pre.line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre.line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;letter-spacing:-1px;padding:1em 0 1em 1em;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block;pointer-events:none}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}div.code-toolbar{position:relative}div.code-toolbar>.toolbar{opacity:0;position:absolute;right:.2em;top:.3em;transition:opacity .3s ease-in-out}div.code-toolbar:hover>.toolbar{opacity:1}div.code-toolbar>.toolbar .toolbar-item{display:inline-block;padding-right:20px}div.code-toolbar>.toolbar a{cursor:pointer}div.code-toolbar>.toolbar button{background:none;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}div.code-toolbar>.toolbar a,div.code-toolbar>.toolbar button,div.code-toolbar>.toolbar span{background:var(--comment);border-radius:.5em;color:var(--foreground);font-size:.8em;padding:.5em}div.code-toolbar>.toolbar a:focus,div.code-toolbar>.toolbar a:hover,div.code-toolbar>.toolbar button:focus,div.code-toolbar>.toolbar button:hover,div.code-toolbar>.toolbar span:focus,div.code-toolbar>.toolbar span:hover{background-color:var(--jade-80);color:inherit;text-decoration:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:var(--background);color:var(--foreground);font-family:PT Mono,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:none;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.5em;height:auto;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:var(--background)}:not(pre)>code[class*=language-]{border-radius:.3em;padding:4px 7px;white-space:normal}.limit-300{height:300px!important;height:400px!important}.limit-500{height:500px!important}.limit-600{height:600px!important}.limit-700{height:700px!important}.limit-800{height:800px!important}.language-css{color:var(--purple-40)}.language-css .token,.token{color:var(--blue-80)}.token.script{color:var(--foreground)}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.atrule,.token.attr-name{color:var(--aqua-80)}.token.attr-value{color:var(--peach-80)}.language-css .token.atrule{color:var(--purple-40)}.language-html .token.attr-value,.language-markup .token.attr-value{color:var(--tangerine-80)}.token.boolean{color:var(--purple-40)}.token.builtin,.token.class-name{color:var(--tangerine-80)}.token.comment{color:var(--comment)}.token.constant{color:var(--purple-40)}.language-javascript .token.constant{color:var(--tangerine-80);font-style:italic}.token.entity{color:var(--blue-80)}.language-css .token.entity{color:var(--jade-80)}.language-html .token.entity.named-entity{color:var(--purple-40)}.language-html .token.entity:not(.named-entity){color:var(--blue-80)}.language-markup .token.entity.named-entity{color:var(--purple-40)}.language-markup .token.entity:not(.named-entity){color:var(--blue-80)}.token.function{color:var(--purple-40)}.language-css .token.function{color:var(--ocean-40)}.token.important,.token.keyword{color:var(--blue-80)}.token.parameter{color:var(--berry-40)}.token.prolog{color:var(--foreground)}.token.property{color:var(--ocean-40)}.language-css .token.property{color:var(--blue-80)}.token.punctuation{color:var(--ocean-80)}.language-css .token.punctuation{color:var(--tangerine-80)}.language-html .token.punctuation,.language-markup .token.punctuation{color:var(--foreground)}.token.selector{color:var(--blue-80)}.language-css .token.selector{color:var(--jade-80)}.token.regex{color:var(--berry-40)}.language-css .token.rule:not(.atrule){color:var(--foreground)}.token.string{color:var(--jade)}.token.tag{color:var(--purple-40)}.token.url{color:var(--aqua-60)}.language-css .token.url{color:var(--tangerine-80)}.token.variable{color:var(--comment)}.token.number{color:#bd93f9}.token.operator{color:#8be9fd}.token.char{color:#ff879d}.token.symbol{color:#ffb86c}.token.deleted,.token.namespace{color:#e2777a}.highlight-line{border-radius:4px;color:inherit;display:inline-block;padding:2px 10px;text-decoration:none}.highlight-line:empty:before{content:" "}.highlight-line:not(:last-child){min-width:100%}.highlight-line .highlight-line:not(:last-child){min-width:0}.highlight-line-isdir{background-color:var(--ocean);color:var(--foreground)}.highlight-line-active{background-color:var(--ocean-20)}.highlight-line-add{background-color:var(--jade)}.highlight-line-remove{background-color:var(--berry-40)}.content{margin:0 auto;max-width:1025px;width:90%}.body-main{margin:0;padding:0 0 3rem}.article-wrapper{margin:0 0 3rem}.article-wrapper h3{border-left:10px solid var(--primary-foundational-color);margin-left:-5px;padding-left:20px}.section{margin-bottom:var(--spacing-section);margin-top:1rem}.section>h3{border-left:none;margin:0;padding-left:0}.nav ul{margin:1rem 0 0;padding:0}.nav ul li{list-style-type:none;margin:0;padding:0}.page-main{padding-top:var(--spacing-section)}.page-main header{margin-bottom:var(--spacing-section)}.documentation-main{display:flex;gap:3rem;justify-content:space-between}.documentation-nav{flex-grow:1;margin-top:1rem;width:30%}.nav ul li.current>a{font-weight:700}.documentation-content{flex-grow:2;width:70%}.documentation-content>h2,.documentation-content>h3{margin-top:var(--spacing-section)}.documentation-content>h4,.documentation-content>h5{margin-top:2rem}.documentation-content-nav ul{margin:0 0 1rem 1rem}.news-content{margin-bottom:var(--spacing-section)}.example-box{border:2px solid var(--border-color);margin-top:1rem;padding:3rem}blockquote{border-left:10px solid var(--secondary-accent-color);border:1px solid var(--secondary-accent-color);font-family:var(--light-font);font-size:30px;margin-bottom:var(--spacing-section);padding:3rem}.footer-main{background:var(--secondary-bg-color);color:var(--tertiary-text-color);height:15rem;margin:0;padding-top:2rem}@container (min-height: 700px){.footer-main{bottom:0;position:absolute;width:100%}}@media (max-width:767px){.content{width:95%}.documentation-content,.documentation-main{display:block;width:95%}.documentation-nav{display:none}}.gatsby-highlight{margin-top:2rem}.header-main{border-bottom:1px solid var(--border-color);padding-top:2.3rem}.header-main .content{align-items:baseline;display:flex;justify-content:flex-end}.header-nav{flex-grow:2;text-align:right}.header-nav ul{display:flex;flex-flow:row wrap;justify-content:flex-end;margin:0;padding:0}.header-nav ul li{border-bottom:5px solid var(--white-foundational-color);list-style-type:none;margin:0 1rem;padding:0 0 10px;text-transform:capitalize}.header-nav ul li.nav-link-current,.header-nav ul li:hover{border-bottom:5px solid var(--primary-foundational-color)}.header-nav ul li a{color:var(--black-foundational-color);font-size:20px;font-weight:600}.header-nav ul li a:hover{text-decoration:none}.header-nav ul li:last-of-type{margin-right:0}.footer-main ul{margin:0;padding:0}.footer-main ul>li{display:inline-block;margin:1rem}.footer-main li{list-style:none}.footer-main,.footer-main li{text-align:center}.main .hero-wrapper{border-left:10px solid var(--primary-foundational-color);margin-bottom:var(--spacing-section)}.main.primary-accent-main .hero-wrapper{border-left:10px solid var(--primary-accent-color)}.main.secondary-accent-main .hero-wrapper{border-left:10px solid var(--secondary-accent-color)}.main .hero-wrapper h2{padding:1.5rem 1rem 0}.hero{height:300px}.hero article{background-color:var(--white-foundational-color);padding:0 1rem 1rem;width:66%}.home-main .hero{background-image:url(/ComposeUI/static/02455_2022Q4ArtRev_GettyImages-1329571403_2285px-2e8a34a572d393ec3dffeca55e2f24b1.jpg);background-position:0 75%}.docs-main .hero{background-image:url(/ComposeUI/static/02354_2022Q2ArtRev_GettyImages-1266548614_2285px-157079d28e16938f3700f89d5e765e92.jpg)}.news-main .hero{background-image:url(/ComposeUI/static/02393_2022Q2ArtRev_GettyImages-184873183_2285px-b34a572f40f024e84b127b141547ab11.jpg)}@media (max-width:767px){.hero{height:400px}.hero article{width:auto}.home-main .hero{background-position:30% 75%}}.card-collection{align-content:stretch;align-items:stretch;display:flex;flex-wrap:wrap;gap:1.2rem;justify-content:space-between;margin-bottom:var(--spacing-section)}.card-collection-container{border-left:10px solid var(--primary-foundational-color);padding-left:1.25rem}.card-collection-container.primary{border-color:var(--primary-accent-color)}.card-collection-container.secondary{border-color:var(--secondary-accent-color)}.card-collection-container.tertiary{border-color:var(--tertiary-accent-color)}.card-collection-container.error{border-color:var(--error-extended-accent-color)}.card-collection-container.berry{border-color:var(--berry-extended-accent-color)}.card-collection-container.peach{border-color:var(--peach-extended-accent-color)}.card-collection-container.tangerine{border-color:var(--tangerine-extended-accent-color)}.card-collection-container.aqua{border-color:var(--aqua-extended-accent-color)}.card-collection-container.none{border:none;padding-left:0}.eyebrow{color:var(--black-foundational-color);font-family:var(--alternate-font);font-size:12px;font-weight:700;text-transform:uppercase}.eyebrow.primary{color:var(--primary-foundational-color)}.eyebrow.secondary{color:var(--secondary-foundational-color)}.eyebrow.error{color:var(--error-extended-accent-color)}.eyebrow.berry{color:var(--berry-extended-accent-color)}.eyebrow.peach{color:var(--peach-extended-accent-color)}.eyebrow.tangerine{color:var(--tangerine-extended-accent-color)}.eyebrow.aqua{color:var(--aqua-extended-accent-color)}.card-collection .card{flex-basis:100%;margin:0}.card-collection.card-collection-cols-2 .card{flex-basis:45%}.card-collection.card-collection-cols-3 .card{flex-basis:30%}.card .card-inner-wrapper>h3{font-size:1.25rem}.card{line-height:1.5rem}.card p{font-size:.9rem;margin-top:0}.card h3{margin:auto}.card .card-image{align-items:center;display:flex;justify-content:center;margin-bottom:.5rem;min-height:125px}.card.card-business-details .card-inner-wrapper>.card-image,.card.card-theme .card-inner-wrapper>.card-image{display:block}.card img{max-width:100%}.card.card-business-details .card-inner-wrapper>.eyebrow-wrapper,.card.card-theme .card-inner-wrapper>.eyebrow-wrapper{margin:-2.6rem 0 .8rem}.card.card-business-details .card-inner-wrapper>.eyebrow-wrapper .eyebrow,.card.card-theme .card-inner-wrapper>.eyebrow-wrapper .eyebrow{background:var(--black-foundational-color);color:var(--white-foundational-color);display:inline-block;font-size:.65rem;font-weight:400;padding:.08rem .5rem}.card.card-person .card-person-title{font-weight:700}.card.card-program .card-inner-wrapper{border:2rem solid var(--purple-extended-accent-color);border-bottom:none;margin:0;padding:1.5rem 1.5rem 0}.card.card-program .card-inner-wrapper .card-program-child:before{border:1px solid var(--secondary-accent-color);content:"";display:block;height:0;margin:1rem 0;width:30px}.card.card-program .card-inner-wrapper .card-program-child{font-weight:700}@media (min-width:768px) and (max-width:1024px){.card-collection .card{flex-basis:45%}}@media (max-width:767px){.card-collection{display:block}}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="sitemap" type="application/xml" href="/ComposeUI/sitemap-index.xml"/><link rel="icon" href="/ComposeUI/favicon-32x32.png?v=fc63ec419dec7c20ea4a6a3ac875fbd0" type="image/png"/><link rel="manifest" href="/ComposeUI/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/ComposeUI/icons/icon-48x48.png?v=fc63ec419dec7c20ea4a6a3ac875fbd0"/><link rel="apple-touch-icon" sizes="72x72" href="/ComposeUI/icons/icon-72x72.png?v=fc63ec419dec7c20ea4a6a3ac875fbd0"/><link rel="apple-touch-icon" sizes="96x96" href="/ComposeUI/icons/icon-96x96.png?v=fc63ec419dec7c20ea4a6a3ac875fbd0"/><link rel="apple-touch-icon" sizes="144x144" href="/ComposeUI/icons/icon-144x144.png?v=fc63ec419dec7c20ea4a6a3ac875fbd0"/><link rel="apple-touch-icon" sizes="192x192" href="/ComposeUI/icons/icon-192x192.png?v=fc63ec419dec7c20ea4a6a3ac875fbd0"/><link rel="apple-touch-icon" sizes="256x256" href="/ComposeUI/icons/icon-256x256.png?v=fc63ec419dec7c20ea4a6a3ac875fbd0"/><link rel="apple-touch-icon" sizes="384x384" href="/ComposeUI/icons/icon-384x384.png?v=fc63ec419dec7c20ea4a6a3ac875fbd0"/><link rel="apple-touch-icon" sizes="512x512" href="/ComposeUI/icons/icon-512x512.png?v=fc63ec419dec7c20ea4a6a3ac875fbd0"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/ComposeUI/static/webfonts/s/karla/v33/qkBIXvYC6trAT55ZBi1ueQVIjQTDppqaE0lK.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/ComposeUI/static/webfonts/s/karla/v33/qkBIXvYC6trAT55ZBi1ueQVIjQTD-JqaE0lK.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/ComposeUI/static/webfonts/s/karla/v33/qkBIXvYC6trAT55ZBi1ueQVIjQTDypqaE0lK.woff2"/><style>@font-face{font-display:swap;font-family:Karla;font-style:normal;font-weight:300;src:url(/ComposeUI/static/webfonts/s/karla/v33/qkBIXvYC6trAT55ZBi1ueQVIjQTDppqaE0lK.woff2) format("woff2")}@font-face{font-display:swap;font-family:Karla;font-style:normal;font-weight:400;src:url(/ComposeUI/static/webfonts/s/karla/v33/qkBIXvYC6trAT55ZBi1ueQVIjQTD-JqaE0lK.woff2) format("woff2")}@font-face{font-display:swap;font-family:Karla;font-style:normal;font-weight:500;src:url(/ComposeUI/static/webfonts/s/karla/v33/qkBIXvYC6trAT55ZBi1ueQVIjQTDypqaE0lK.woff2) format("woff2")}@font-face{font-display:swap;font-family:Karla;font-style:normal;font-weight:300;src:url(/ComposeUI/static/webfonts/s/karla/v33/qkBIXvYC6trAT55ZBi1ueQVIjQTDppqaE0lM.woff) format("woff")}@font-face{font-display:swap;font-family:Karla;font-style:normal;font-weight:400;src:url(/ComposeUI/static/webfonts/s/karla/v33/qkBIXvYC6trAT55ZBi1ueQVIjQTD-JqaE0lM.woff) format("woff")}@font-face{font-display:swap;font-family:Karla;font-style:normal;font-weight:500;src:url(/ComposeUI/static/webfonts/s/karla/v33/qkBIXvYC6trAT55ZBi1ueQVIjQTDypqaE0lM.woff) format("woff")}</style><title data-gatsby-head="true">Message Router API documentation | ComposeUI | Morgan Stanley</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="header-main"><div class="content"><h1 class="logo"><a class="logo-link" href="/ComposeUI//morganstanley.github.io/"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:267px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;38&#x27;%20width=&#x27;267&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:transparent;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/47073/logo-black.webp 267w,/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/0cb59/logo-black.webp 750w,/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/ed794/logo-black.webp 1000w" sizes="(min-width: 267px) 267px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 267px) 267px, 100vw" decoding="async" loading="lazy" data-src="/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/260db/logo-black.png" data-srcset="/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/260db/logo-black.png 267w,/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/0a772/logo-black.png 750w,/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/9aa9c/logo-black.png 1000w" alt="Morgan Stanley Logo"/></picture><noscript><picture><source type="image/webp" srcSet="/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/47073/logo-black.webp 267w,/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/0cb59/logo-black.webp 750w,/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/ed794/logo-black.webp 1000w" sizes="(min-width: 267px) 267px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 267px) 267px, 100vw" decoding="async" loading="lazy" src="/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/260db/logo-black.png" srcSet="/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/260db/logo-black.png 267w,/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/0a772/logo-black.png 750w,/ComposeUI/static/6fbae7212cd29fc45a5be1a73afb20f8/9aa9c/logo-black.png 1000w" alt="Morgan Stanley Logo"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></a></h1><div class="header-nav"><ul><li class="nav-link-current"><a href="/ComposeUI/">home</a></li><li class="nav-link"><a href="/ComposeUI/architecture/">architecture</a></li><li class="nav-link-current"><a href="/ComposeUI/documentation/">documentation</a></li></ul></div></div></header><main class="body-main"><article class="page-main content"><h3>ComposeUI</h3></article><article class="page-main content documentation-main"><nav class="nav documentation-nav"><h4>Documentation</h4><style data-emotion="css 178yklu">.css-178yklu{margin-top:24px;}</style><div class="MuiBox-root css-178yklu"><style data-emotion="css 1qk38wv">.css-1qk38wv{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;min-width:0;padding:0;margin:0;border:0;vertical-align:top;}</style><div class="MuiFormControl-root css-1qk38wv" data-testid="documentation-version-select"><style data-emotion="css-global 1prfaxn">@-webkit-keyframes mui-auto-fill{from{display:block;}}@keyframes mui-auto-fill{from{display:block;}}@-webkit-keyframes mui-auto-fill-cancel{from{display:block;}}@keyframes mui-auto-fill-cancel{from{display:block;}}</style><style data-emotion="css i6avoa">.css-i6avoa{font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.4375em;letter-spacing:0.00938em;color:rgba(0, 0, 0, 0.87);box-sizing:border-box;position:relative;cursor:text;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;border-radius:4px;}.css-i6avoa.Mui-disabled{color:rgba(0, 0, 0, 0.38);cursor:default;}.css-i6avoa:hover .MuiOutlinedInput-notchedOutline{border-color:rgba(0, 0, 0, 0.87);}@media (hover: none){.css-i6avoa:hover .MuiOutlinedInput-notchedOutline{border-color:rgba(0, 0, 0, 0.23);}}.css-i6avoa.Mui-focused .MuiOutlinedInput-notchedOutline{border-width:2px;}.css-i6avoa.Mui-focused .MuiOutlinedInput-notchedOutline{border-color:#187aba;}.css-i6avoa.Mui-error .MuiOutlinedInput-notchedOutline{border-color:#d32f2f;}.css-i6avoa.Mui-disabled .MuiOutlinedInput-notchedOutline{border-color:rgba(0, 0, 0, 0.26);}</style><div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-colorPrimary MuiInputBase-formControl css-i6avoa"><style data-emotion="css 1pk1fka">.css-1pk1fka{font:inherit;letter-spacing:inherit;color:currentColor;padding:4px 0 5px;border:0;box-sizing:content-box;background:none;height:1.4375em;margin:0;-webkit-tap-highlight-color:transparent;display:block;min-width:0;width:100%;-webkit-animation-name:mui-auto-fill-cancel;animation-name:mui-auto-fill-cancel;-webkit-animation-duration:10ms;animation-duration:10ms;padding:16.5px 14px;}.css-1pk1fka::-webkit-input-placeholder{color:currentColor;opacity:0.42;-webkit-transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1pk1fka::-moz-placeholder{color:currentColor;opacity:0.42;-webkit-transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1pk1fka::-ms-input-placeholder{color:currentColor;opacity:0.42;-webkit-transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1pk1fka:focus{outline:0;}.css-1pk1fka:invalid{box-shadow:none;}.css-1pk1fka::-webkit-search-decoration{-webkit-appearance:none;}label[data-shrink=false]+.MuiInputBase-formControl .css-1pk1fka::-webkit-input-placeholder{opacity:0!important;}label[data-shrink=false]+.MuiInputBase-formControl .css-1pk1fka::-moz-placeholder{opacity:0!important;}label[data-shrink=false]+.MuiInputBase-formControl .css-1pk1fka::-ms-input-placeholder{opacity:0!important;}label[data-shrink=false]+.MuiInputBase-formControl .css-1pk1fka:focus::-webkit-input-placeholder{opacity:0.42;}label[data-shrink=false]+.MuiInputBase-formControl .css-1pk1fka:focus::-moz-placeholder{opacity:0.42;}label[data-shrink=false]+.MuiInputBase-formControl .css-1pk1fka:focus::-ms-input-placeholder{opacity:0.42;}.css-1pk1fka.Mui-disabled{opacity:1;-webkit-text-fill-color:rgba(0, 0, 0, 0.38);}.css-1pk1fka:-webkit-autofill{-webkit-animation-duration:5000s;animation-duration:5000s;-webkit-animation-name:mui-auto-fill;animation-name:mui-auto-fill;}.css-1pk1fka:-webkit-autofill{border-radius:inherit;}</style><style data-emotion="css mp9f0v">.css-mp9f0v{-moz-appearance:none;-webkit-appearance:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:0;cursor:pointer;border-radius:4px;font:inherit;letter-spacing:inherit;color:currentColor;padding:4px 0 5px;border:0;box-sizing:content-box;background:none;height:1.4375em;margin:0;-webkit-tap-highlight-color:transparent;display:block;min-width:0;width:100%;-webkit-animation-name:mui-auto-fill-cancel;animation-name:mui-auto-fill-cancel;-webkit-animation-duration:10ms;animation-duration:10ms;padding:16.5px 14px;}.css-mp9f0v:focus{border-radius:0;}.css-mp9f0v.Mui-disabled{cursor:default;}.css-mp9f0v[multiple]{height:auto;}.css-mp9f0v:not([multiple]) option,.css-mp9f0v:not([multiple]) optgroup{background-color:#fff;}.css-mp9f0v:focus{border-radius:4px;}.css-mp9f0v.css-mp9f0v.css-mp9f0v{padding-right:32px;}.css-mp9f0v.MuiSelect-select{height:auto;min-height:1.4375em;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}.css-mp9f0v::-webkit-input-placeholder{color:currentColor;opacity:0.42;-webkit-transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-mp9f0v::-moz-placeholder{color:currentColor;opacity:0.42;-webkit-transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-mp9f0v::-ms-input-placeholder{color:currentColor;opacity:0.42;-webkit-transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-mp9f0v:focus{outline:0;}.css-mp9f0v:invalid{box-shadow:none;}.css-mp9f0v::-webkit-search-decoration{-webkit-appearance:none;}label[data-shrink=false]+.MuiInputBase-formControl .css-mp9f0v::-webkit-input-placeholder{opacity:0!important;}label[data-shrink=false]+.MuiInputBase-formControl .css-mp9f0v::-moz-placeholder{opacity:0!important;}label[data-shrink=false]+.MuiInputBase-formControl .css-mp9f0v::-ms-input-placeholder{opacity:0!important;}label[data-shrink=false]+.MuiInputBase-formControl .css-mp9f0v:focus::-webkit-input-placeholder{opacity:0.42;}label[data-shrink=false]+.MuiInputBase-formControl .css-mp9f0v:focus::-moz-placeholder{opacity:0.42;}label[data-shrink=false]+.MuiInputBase-formControl .css-mp9f0v:focus::-ms-input-placeholder{opacity:0.42;}.css-mp9f0v.Mui-disabled{opacity:1;-webkit-text-fill-color:rgba(0, 0, 0, 0.38);}.css-mp9f0v:-webkit-autofill{-webkit-animation-duration:5000s;animation-duration:5000s;-webkit-animation-name:mui-auto-fill;animation-name:mui-auto-fill;}.css-mp9f0v:-webkit-autofill{border-radius:inherit;}</style><div tabindex="0" role="combobox" aria-controls=":R2alaj9:" aria-expanded="false" aria-haspopup="listbox" aria-labelledby="documentation-version-label documentation-version-select" id="documentation-version-select" class="MuiSelect-select MuiSelect-outlined MuiInputBase-input MuiOutlinedInput-input css-mp9f0v">v0.1.0-alpha.4</div><style data-emotion="css 147e5lo">.css-147e5lo{bottom:0;left:0;position:absolute;opacity:0;pointer-events:none;width:100%;box-sizing:border-box;}</style><input aria-invalid="false" aria-hidden="true" tabindex="-1" class="MuiSelect-nativeInput css-147e5lo" value="v0.1.0-alpha.4"/><style data-emotion="css 1g8ch8">.css-1g8ch8{position:absolute;right:0;top:calc(50% - .5em);pointer-events:none;color:rgba(0, 0, 0, 0.54);right:7px;}.css-1g8ch8.Mui-disabled{color:rgba(0, 0, 0, 0.26);}</style><style data-emotion="css 1l3b12y">.css-1l3b12y{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;fill:currentColor;font-size:1.5rem;position:absolute;right:0;top:calc(50% - .5em);pointer-events:none;color:rgba(0, 0, 0, 0.54);right:7px;}.css-1l3b12y.Mui-disabled{color:rgba(0, 0, 0, 0.26);}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiSelect-icon MuiSelect-iconOutlined css-1l3b12y" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowDropDownIcon"><path d="M7 10l5 5 5-5z"></path></svg><style data-emotion="css h2v8xi">.css-h2v8xi{border-color:rgba(0, 0, 0, 0.23);}</style><style data-emotion="css 5v2ak0">.css-5v2ak0{text-align:left;position:absolute;bottom:0;right:0;top:-5px;left:0;margin:0;padding:0 8px;pointer-events:none;border-radius:inherit;border-style:solid;border-width:1px;overflow:hidden;min-width:0%;border-color:rgba(0, 0, 0, 0.23);}</style><fieldset aria-hidden="true" class="MuiOutlinedInput-notchedOutline css-5v2ak0"><style data-emotion="css w4cd9x">.css-w4cd9x{float:unset;width:auto;overflow:hidden;padding:0;line-height:11px;-webkit-transition:width 150ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;transition:width 150ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;}</style><legend class="css-w4cd9x"><span class="notranslate" aria-hidden="true">​</span></legend></fieldset></div></div></div><ul><li class=""><a href="/ComposeUI/documentation/v0.1.0-alpha.4/examples/">Examples</a></li><li class="current"><a aria-current="page" class="" href="/ComposeUI/documentation/v0.1.0-alpha.4/message-router/">Message Router API documentation</a><nav class="nav documentation-content-nav"><ul><li><a href="/ComposeUI/documentation/v0.1.0-alpha.4/message-router/#setup">Setup</a></li><li><a href="/ComposeUI/documentation/v0.1.0-alpha.4/message-router/#usage">Usage</a></li></ul></nav></li></ul></nav><div class="documentation-content"><header><h2>Message Router API documentation</h2></header>
<p>The Message Router is responsible for every communication that happens between processes. It is an independent pluggable module that runs under the main ComposeUI process, delivering messages between processes and optionally other devices.
Message Router is an open-source out-of-the-box library that is fast and reliable. It supports JSON and it also uses WebSockets and has a Javascript library, so Web-based applications can be integrated.
So basically it is real-time solution that can be easily setup for Pub-Sub messaging.</p>
<p>More details can be found under the <a href="https://github.com/morganstanley/ComposeUI/blob/main/architecture/adr-012-message-router.md">ADR-012</a>.
The Message Router is an ASP.NET Core-based backend service that exposes one or more endpoints that the applications can connect to.</p>
<h3 id="setup" style="position:relative"><a href="#setup" aria-label="setup permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Setup</h3>
<p>Message Router Server can be setup in .NET by adding to the <span><code class="language-text">ServiceCollection</code></span> and its configuration like <span><code class="language-text">MessageRouterWebSocketServerOptions</code></span> after you have added the nuget package: <span><code class="language-text">MorganStanley.ComposeUI.Messaging.Server</code></span>.</p>
<p>Example:</p>
<span><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name">IHostBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

builder<span class="token punctuation">.</span><span class="token function">ConfigureServices</span><span class="token punctuation">(</span>
    services <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        services<span class="token punctuation">.</span><span class="token function">AddMessageRouterServer</span><span class="token punctuation">(</span>
            server <span class="token operator">=></span>
            <span class="token punctuation">{</span>
                server<span class="token punctuation">.</span><span class="token function">UseAccessTokenValidator</span><span class="token punctuation">(</span>
                    <span class="token punctuation">(</span>clientId<span class="token punctuation">,</span> token<span class="token punctuation">)</span> <span class="token operator">=></span>
                    <span class="token punctuation">{</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>token <span class="token operator">!=</span> AccessToken<span class="token punctuation">)</span>
                        <span class="token punctuation">{</span>
                            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">InvalidOperationException</span><span class="token punctuation">(</span><span class="token string">"Invalid access token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token function">ConfigureServer</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">ConfigureServices</span><span class="token punctuation">(</span>services<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

_host <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> _host<span class="token punctuation">.</span><span class="token function">StartAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
<p>where with the <span><code class="language-text">ConfigureServer</code></span> method the <span><code class="language-text">MessageRouterWebSocketServerOptions</code></span> - <a href="https://github.com/morganstanley/ComposeUI/blob/main/src/messaging/dotnet/src/Server/Server/WebSocket/MessageRouterWebSocketServerOptions.cs">reference</a>, can be set with properties like <span><code class="language-text">RootPath</code></span> and <span><code class="language-text">Port</code></span>.
The server implementation is only available on the .NET side.</p>
<p>Also the Message Router Client can be set up in .NET easily with dependecy injection. You are able to call the <span><code class="language-text">AddMessageRouter()</code></span> extension method on a <span><code class="language-text">IServiceCollection</code></span> where you can configure <span><code class="language-text">MessageRouterWebSocketOptions</code></span> - <a href="https://github.com/morganstanley/ComposeUI/blob/main/src/messaging/dotnet/src/Client/Client/WebSocket/MessageRouterWebSocketOptions.cs">reference</a>, within the <span><code class="language-text">.UseWebSocket()</code></span> builder method and the AccessToken with the <span><code class="language-text">UseAccessToken</code></span> after you have added the nuget package: <span><code class="language-text">MorganStanley.ComposeUI.Messaging.Client</code></span>.</p>
<span><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> services <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddMessageRouter</span><span class="token punctuation">(</span>
        mr <span class="token operator">=></span> mr
            <span class="token punctuation">.</span><span class="token function">UseWebSocket</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MessageRouterWebSocketOptions</span>
                <span class="token punctuation">{</span>
                    Uri <span class="token operator">=</span> _webSocketUri
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">UseAccessToken</span><span class="token punctuation">(</span>AccessToken<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">BuildServiceProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
<p>In Javascript/Typescript you should import the <span><code class="language-text">createMessageRouter</code></span> from the <span><code class="language-text">@morgan-stanley/composeui-messaging-client</code></span> library.</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createMessageRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@morgan-stanley/composeui-messaging-client'</span><span class="token punctuation">;</span></code></pre></div></span>
<p>Use <span><code class="language-text">createMessageRouter()</code></span> to instantiate the MessageRouter client in a ComposeUI application. It will connect to the MessageRouter hosted by the container when you call <span><code class="language-text">connect()</code></span> on the client.</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> client <span class="token operator">=</span> <span class="token function">createMessageRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
<p>The <span><code class="language-text">MessageRouterConfig</code></span> will be read from a global variable - from the window’s <span><code class="language-text">composeui.messageRouterConfig</code></span>, where the <span><code class="language-text">url</code></span> and the same property, <span><code class="language-text">accessToken</code></span> can be set.</p>
<p>If you are using the Message Router Client you will be able to get its unique client Id which shows the id of the current connection.
You can query that by calling the <span><code class="language-text">ClientId</code></span> property from the interface.</p>
<p>In Javascript/Typescript side you can also get the same property from the interface by calling the <span><code class="language-text">clientId</code></span> property’s getter.</p>
<p>The Message Router inteface provides a huge set of functionality to handle messages as it adds the ability for Pub-Sub messaging.
To directly connect to the server, you can call the <span><code class="language-text">ConnectAsync</code></span> method from the interface on the .NET side. Clients don’t need to call this method before calling any other methog on the interface. The client automatically establish the connection when needed.
In .NET you can connect to the server endpoint, by passing a <span><code class="language-text">CancellationToken</code></span> as well which can control the connection lifetime. Not setting that will fallback on its default value which is <span><code class="language-text">CancellationToken.None</code></span>.</p>
<p>In Javascript/Typescript you are also able to achieve this by calling the <span><code class="language-text">connect</code></span> method which returns a <span><code class="language-text">Promise&lt;void></code></span>.</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
<h3 id="usage" style="position:relative"><a href="#usage" aria-label="usage permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Usage</h3>
<h4 id="subscribe-to-a-topic" style="position:relative"><a href="#subscribe-to-a-topic" aria-label="subscribe to a topic permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Subscribe to a topic</h4>
<p>Use the subscribe method of the client to set a handler on a topic. The message parameter of the handler method contains the payload as a string. The following example parses a JSON payload from the “exampleTopic” topic and logs it to console.</p>
<ul>
<li>
<p>.NET</p>
<span><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token return-type class-name">ValuTask</span> <span class="token function">HandleTopicMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageBuffer<span class="token punctuation">?</span></span> payload<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>payload<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ValueTask<span class="token punctuation">.</span>CompletedTask<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">await</span> _messageRouter<span class="token punctuation">.</span><span class="token function">SubscribeAsync</span><span class="token punctuation">(</span>
    <span class="token string">"exampleTopic"</span><span class="token punctuation">,</span>
    AsyncObserver<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Create</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TopicMessage<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>x <span class="token operator">=></span> <span class="token function">HandleTopicMessage</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>Payload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
<p>It returns an <span><code class="language-text">IAsyncDisposable</code></span> object.</p>
</li>
<li>
<p>Javascript/TypeScript</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">client<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'exampleTopic'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> payload <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
<p>It returns an <span><code class="language-text">Unsubscribable</code></span> object.</p>
</li>
</ul>
<h4 id="publish-a-message" style="position:relative"><a href="#publish-a-message" aria-label="publish a message permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Publish a message</h4>
<p>Use the publish method of the client to publish a message to a topic. The payload of the message must be a string. The following example creates a JSON string out of an object, and publishes it to the “exampleTopic” topic.</p>
<ul>
<li>
<p>.NET</p>
<span><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">await</span> _messageRouter<span class="token punctuation">.</span><span class="token function">PublishAsync</span><span class="token punctuation">(</span>
    'exampleTopic'<span class="token punctuation">,</span>
    MessageBuffer<span class="token punctuation">.</span>Factory<span class="token punctuation">.</span><span class="token function">CreateJson</span><span class="token punctuation">(</span>payloadObject<span class="token punctuation">,</span> _jsonSerializerOptions<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
<p>where <span><code class="language-text">_jsonSerializerOptions</code></span> is your own defined serializer options to be used with the <span><code class="language-text">JsonSerializer</code></span>.</p>
</li>
<li>
<p>Javascript/Typescript</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'exampleTopic'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>payloadObject<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
</li>
</ul>
<h4 id="invoking-a-service" style="position:relative"><a href="#invoking-a-service" aria-label="invoking a service permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Invoking a service</h4>
<p>Use the invoke method of the client to invoke a registered service’s handler and get the response from it. The payload must be a string.</p>
<ul>
<li>
<p>.NET</p>
<span><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> resultBuffer <span class="token operator">=</span> <span class="token keyword">await</span> _messageRouter<span class="token punctuation">.</span><span class="token function">InvokeAsync</span><span class="token punctuation">(</span>
    <span class="token string">"exampleTopic"</span><span class="token punctuation">,</span>
    MessageBuffer<span class="token punctuation">.</span>Factory<span class="token punctuation">.</span><span class="token function">CreateJson</span><span class="token punctuation">(</span>payloadObject<span class="token punctuation">,</span> _jsonSerializerOptions<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
<p>This results an <span><code class="language-text">MessageBuffer</code></span> -see <a href="https://github.com/morganstanley/ComposeUI/blob/main/src/messaging/dotnet/src/Core/MessageBuffer.cs">reference</a>, type where you could call the <span><code class="language-text">ReadJson&lt;T></code></span> extension method to convert the buffer to the expected type that the called service should return eg. <span><code class="language-text">var result = resultBuffer.ReadJson&lt;MyClass>(_jsonSerializerOptions);</code></span>.</p>
</li>
<li>
<p>Javascript/Typescript</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> resultBuffer <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>messageRouterClient<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'exampleTopic'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>payloadObject<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token operator">&lt;</span>MyClass<span class="token operator">></span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>resultBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
</li>
</ul>
<h4 id="registering-a-service" style="position:relative"><a href="#registering-a-service" aria-label="registering a service permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Registering a service</h4>
<p>Use the register service method to register a service by providing its name and its handler. The handler should return the type of <span><code class="language-text">MessageBuffer?</code></span> so when a client calls the service they will receive the response from the registered handler function.</p>
<ul>
<li>
<p>.NET</p>
<span><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">await</span> _messageRouter<span class="token punctuation">.</span><span class="token function">RegisterServiceAsync</span><span class="token punctuation">(</span>
    <span class="token string">"exampleTopic"</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> payload<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Payload is handled."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValueTask<span class="token punctuation">&lt;</span>MessageBuffer<span class="token punctuation">?</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>MessageBuffer<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
</li>
<li>
<p>Javascript/Typescript</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">registerService</span><span class="token punctuation">(</span><span class="token string">'exampleTopic'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'This is a test service'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
</li>
</ul>
<h4 id="unregistering-a-service" style="position:relative"><a href="#unregistering-a-service" aria-label="unregistering a service permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Unregistering a service</h4>
<p>Use the unregister service method if you want to remove the service registration.</p>
<ul>
<li>
<p>.NET</p>
<span><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">await</span> _messageRouter<span class="token punctuation">.</span><span class="token function">UnregisterServiceAsync</span><span class="token punctuation">(</span><span class="token string">"exampleTopic"</span><span class="token punctuation">,</span> cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
</li>
<li>
<p>Javascript/Typescript</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">unregisterService</span><span class="token punctuation">(</span><span class="token string">'exampleTopic'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
</li>
</ul>
<h4 id="registering-an-endpoint" style="position:relative"><a href="#registering-an-endpoint" aria-label="registering an endpoint permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Registering an endpoint</h4>
<p>Use register an endpoint method if you want to register an endpoint by providing a name, handler and optional descriptor - and of course optionally the cancellationToken. The main difference between the RegisterService and RegisterEndpoint is that when we register a service, then we send a register service call to the server so it gets registered on the server side while the endpoint is only registering the endpoint on the client so that endpoint could not be used for another service registered by the client.
The invoke request in this case would be solved “locally”.</p>
<ul>
<li>
<p>.NET</p>
<span><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">await</span> _messageRouter<span class="token punctuation">.</span><span class="token function">RegisterEndpointAsync</span><span class="token punctuation">(</span>
    <span class="token string">"exampleTopic"</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> payload<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Payload is handled."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValueTask<span class="token punctuation">&lt;</span>MessageBuffer<span class="token punctuation">?</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>MessageBuffer<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
</li>
<li>
<p>Javascript/Typescript</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">registerEndpoint</span><span class="token punctuation">(</span>
  <span class="token string">'exampleTopic'</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">endpoint<span class="token punctuation">,</span> payload<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Payload is handled.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
</li>
</ul>
<h4 id="unregistering-an-endpoint" style="position:relative"><a href="#unregistering-an-endpoint" aria-label="unregistering an endpoint permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Unregistering an endpoint</h4>
<p>Use the unregister endpoint method if you want to remove an endpoint.</p>
<ul>
<li>
<p>NET</p>
<span><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> cancellationTokenSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CancellationTokenSource</span><span class="token punctuation">(</span>TimeSpan<span class="token punctuation">.</span><span class="token function">FromMinutes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> _messageRouter<span class="token punctuation">.</span><span class="token function">UnregisterEndpointAsync</span><span class="token punctuation">(</span><span class="token string">"exampleTopic"</span><span class="token punctuation">,</span> cancellationTokenSource<span class="token punctuation">.</span>Token<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
</li>
<li>
<p>Javascript/Typescript</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">unregisterEndpoint</span><span class="token punctuation">(</span><span class="token string">'exampleTopic'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
</li>
</ul>
<p>There are some optional values the above mentioned methods/functions eg.: <span><code class="language-text">CancellationToken</code></span> or <span><code class="language-text">EndpointDescriptior</code></span>, with you can add additional details to the Message Router or control the call, but you’ll find every detail when you are using the API as MessageRouter is well documented.
If you are interested explicitely on the API, you can find the source code on GitHub (<a href="https://github.com/morganstanley/ComposeUI/blob/main/src/messaging/js/composeui-messaging-client/src/MessageRouter.ts">Typescript</a> and <a href="https://github.com/morganstanley/ComposeUI/blob/main/src/messaging/dotnet/src/Core/IMessageRouter.cs">.NET</a>).</p>
<p>Example code snippets can be found under the <a href="https://github.com/morganstanley/ComposeUI/tree/main/examples/js-chart-and-grid-messagerouter">examples folder</a>.</p></div></article></main><footer class="footer-main"><div class="content"><ul><li><a href="https://github.com/MorganStanley/" target="_blank" rel="noreferrer">Github</a></li><li><a href="https://MorganStanley.com" target="_blank" rel="noreferrer">Morgan Stanley</a></li><hr/></ul><p>©<!-- -->2025<!-- --> Morgan Stanley. All rights reserved.</p></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/documentation/v0.1.0-alpha.4/message-router/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-03468da639d631216c93.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-pages-404-js\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-pages-404-js-3ab582bdd78c45785deb.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-001-use-adrs-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-001-use-adrs-mdx-6e329ba48f33be7eb20a.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-002-configuration-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-002-configuration-mdx-c47c876c992ea41a324a.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-003-solution-and-project-structure-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-003-solution-and-project-structure-mdx-ad8dc6fc38c2715c16d5.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-004-module-loading-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-004-module-loading-mdx-3a9915046ac6a16223a0.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-005-messaging-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-005-messaging-mdx-906c0c629d7524bb0dc7.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-006-observability-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-006-observability-mdx-50506591d4312fc7d406.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-007-use-c-4-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-007-use-c-4-mdx-9221161f37ce8a7ed494.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-008-module-security-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-008-module-security-mdx-cf254e5f7a2438b80ffb.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-009-message-router-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-009-message-router-mdx-223909da200922ed4bc9.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-010-built-in-apis-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-010-built-in-apis-mdx-c25c94e6791008c31013.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-011-process-ownership-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-011-process-ownership-mdx-ab4417e5bfbac292b2b8.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-012-message-router-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-012-message-router-mdx-a3a7c1d9fd218b90422e.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-013-script-preloading-security-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-013-script-preloading-security-mdx-241bb6b2542f98898380.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-014-module-catalog-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-014-module-catalog-mdx-3239c5034c74de8a95bb.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-015-module-loader-events-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-015-module-loader-events-mdx-07fb00ae540cd5351eed.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-016-shell-api-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-016-shell-api-mdx-b333533e848313baa1f3.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-017-netstandard-interfaces-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-017-netstandard-interfaces-mdx-2473d451d178dbf2cf05.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-018-messaging-interface-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-architecture-js-content-file-path-content-architecture-adr-018-messaging-interface-mdx-8a5238a2941c71846483.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-documentation-js-content-file-path-content-documentation-v-0-1-0-alpha-4-examples-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-documentation-js-content-file-path-content-documentation-v-0-1-0-alpha-4-examples-mdx-9e5d44c81bdffaa0f590.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-documentation-js-content-file-path-content-documentation-v-0-1-0-alpha-4-message-router-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-documentation-js-content-file-path-content-documentation-v-0-1-0-alpha-4-message-router-mdx-737ebb47b6dff27b521f.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-index-js-content-file-path-content-architecture-index-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-index-js-content-file-path-content-architecture-index-mdx-b1b1e227e515dd9ffc6b.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-index-js-content-file-path-content-documentation-index-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-index-js-content-file-path-content-documentation-index-mdx-7ff004abd3c0bc6dbfab.js\"],\"component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-index-js-content-file-path-content-index-mdx\":[\"/component---node-modules-morganstanley-gatsby-theme-ms-gh-pages-src-templates-index-js-content-file-path-content-index-mdx-b1e9b39d48e2cad41ac5.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="648d238f15d592fff784";</script><script src="/ComposeUI/webpack-runtime-5b8a4b5cb7303784eb06.js" async></script><script src="/ComposeUI/framework-e8b4ef588b2ccdcf2e97.js" async></script><script src="/ComposeUI/app-03468da639d631216c93.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>